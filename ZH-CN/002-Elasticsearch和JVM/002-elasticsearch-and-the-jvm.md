```
WIP, COVERS ELASTICSEARCH 5.5.x, UPDATING TO ES 6.5.x
```

# Elasticsearch和Java虚拟机

Elasticsearch是使用Java编写的软件，它需要部署在同一台机器的Java运行时环境（JRE）去运行。目前支持的Elasticsearch版本可以在以下操作系统/发行版和Java上运行。

## 支持的JVM和操作系统/发行版

下面的表格展示了Elastic为2.4.x和5.5.x版本官方所支持的各种的操作系统和Java虚拟机。下面没有提及的操作系统或者JVM是不被Elastic所支持的，因此不应该使用。

### 操作系统 

|     | CentOS/RHEL 6.x/7.x | Oracle Enterprise Linux 6/7 with RHEL Kernel only | Ubuntu 14.04 | Ubuntu 16.04 | **Ubuntu 18.04** | SLES 11 SP4\*\*/12 | SLES 12 | openSUSE Leap 42 |
| --- |:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
| **ES 5.0.x** | ✅ | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | ✅ |
| **ES 5.1.x** | ✅ | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | ✅ |
| **ES 5.2.x** | ✅ | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | ✅ |
| **ES 5.3.x** | ✅ | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | ✅ |
| **ES 5.4.x** | ✅ | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | ✅ |
| **ES 5.5.x** | ✅ | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | ✅ |
| **ES 6.0.x** | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ | ✅ | ✅ |
| **ES 6.1.x** | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ | ✅ | ✅ |
| **ES 6.2.x** | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ | ✅ | ✅ |
| **ES 6.3.x** | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ | ✅ | ✅ |
| **ES 6.4.x** | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ | ✅ | ✅ |
| **ES 6.5.x** | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ |


|     | Windows Server 2012/R2 | Windows Server 2016 | Debian 7 | Debian 8 | Debian 9 | **Solaris / SmartOS** | Amazon Linux |
| --- |:---:|:---:|:---:|:---:|:---:|:---:|:---:|
| **ES 5.0** | ✅ | ❌ | ✅ | ✅ | ❌ | ❌ | ✅ |
| **ES 5.1.x** | ✅ | ❌ | ✅ | ✅ | ❌ | ❌ | ✅ |
| **ES 5.2.x** | ✅ | ❌ | ✅ | ✅ | ❌ | ❌ | ✅ |
| **ES 5.3.x** | ✅ | ❌ | ✅ | ✅ | ❌ | ❌ | ✅ |
| **ES 5.4.x** | ✅ | ❌ | ✅ | ✅ | ❌ | ❌ | ✅ |
| **ES 5.5.x** | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ | ✅ |
| **ES 6.0.x** | ✅ | ✅ | ❌ | ✅ | ✅ | ❌ | ✅ |
| **ES 6.1.x** | ✅ | ✅ | ❌ | ✅ | ✅ | ❌ | ✅ |
| **ES 6.2.x** | ✅ | ✅ | ❌ | ✅ | ✅ | ❌ | ✅ |
| **ES 6.3.x** | ✅ | ✅ | ❌ | ✅ | ✅ | ❌ | ✅ |
| **ES 6.4.x** | ✅ | ✅ | ❌ | ✅ | ✅ | ❌ | ✅ |
| **ES 6.5.x** | ✅ | ✅ | ❌ | ✅ | ✅ | ❌ | ✅ |

Elasticsearch可以运行在OpenSolaris和FreeBSD上。FreeBSD 11.1提供了一个由[Mark Felder](mailto:feld@freebsd.org)维护的Elasticsearch 6.4.2版本包，但是这些操作系统都不被Elastic官方支持。

### Java虚拟机

|     | Oracle/OpenJDK 1.8.0u111+ | Oracle/OpenJDK 9 | OpenJDK 10 | OpenJDK 11 | Azul Zing 16.01.9.0+ | IBM J9 |
| --- |:---:|:---:|:---:|:---:|:---:| --- |
| **ES 5.0.x** | ✅ | ❌ | ❌ | ❌ | ✅ | ❌ |
| **ES 5.1.x** | ✅ | ❌ | ❌ | ❌ | ✅ | ❌ |
| **ES 5.2.x** | ✅ | ❌ | ❌ | ❌ | ✅ | ❌ |
| **ES 5.3.x** | ✅ | ❌ | ❌ | ❌ | ✅ | ❌ |
| **ES 5.4.x** | ✅ | ❌ | ❌ | ❌ | ✅ | ❌ |
| **ES 5.5.x** | ✅ | ❌ | ❌ | ❌ | ✅ | ❌ |
| **ES 5.6**.x | ✅ | ❌ | ❌ | ❌ | ✅ | ❌ |
| **ES 6.0.x** | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ |
| **ES 6.1.x** | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ |
| **ES 6.2.x** | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ |
| **ES 6.3.x** | ✅ | ❌ | ✅ | ❌ | ❌ | ❌ |
| **ES 6.4.x** | ✅ | ❌ | ✅ | ❌ | ❌ | ❌ |
| **ES 6.5.x** | ✅ | ❌ | ❌ | ✅ | ❌ | ❌ |



## 内存管理

TODO

## 垃圾回收

Java是一个垃圾收集语言。开发者不必管理内存的分配，Java虚拟机周期性地运行一个称为GC线程的特定系统线程来负责不同的垃圾收集活动。这些活动之一是回收不再被程序使用的对象占用的内存。

Java 1.8 拥有3个不同的垃圾收集器家族，每个都拥有自己的特性。

*Single Collector* 使用一个单线程来执行整个垃圾回收过程。它在单处理器的机器上非常高效，因为它消除了线程之间通信所隐含的开销，但是它不适合大部分今天现实世界中的用途。它被设计用于管理堆中小的100M数量级的数据集。

*Parallel Collector* 并行地运行多个小规模的垃圾回收器。运行并行的收集器减少了垃圾收集的开销。它专为在多线程主机上运行的中型到大型数据集而设计。

*Mostly Concurrent Collector* 同时执行其大部分工作，以防止垃圾收集暂停。它适用于大型数据集且响应时间很重要的情况，因为用于最小化暂停的技术会影响应用程序性能。Java 1.8提供了两个主要的并发收集器：*Concurrent Mark & Sweep Garbage Collector* 和 *Garbage First Garbage Collector*，也被称为G1GC。

### 并发标记和扫描垃圾收集器

TODO

### G1垃圾收集器

TODO
